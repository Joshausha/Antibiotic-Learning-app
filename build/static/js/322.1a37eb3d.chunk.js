"use strict";(self.webpackChunkantibiotic_learning_app=self.webpackChunkantibiotic_learning_app||[]).push([[322],{296:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(305).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},322:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(43),n=t(305);const i=(0,n.A)("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);var l=t(712),r=t(514);const o=(0,n.A)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var c=t(763),d=t(275);const x=(0,n.A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),m=(0,n.A)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var h=t(296);const g=(0,n.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var p=t(421),u=t(487),b=t(903),v=t(579);const j=e=>{var s;let{indexes:t,selectedPathogen:n,targetPathogen:j,onSelectPathogen:y,onShowPathDetails:f,recentlyViewed:N=[],userPreferences:w={},className:k=""}=e;const[S,z]=(0,a.useState)("guided"),[A,C]=(0,a.useState)([]),[P,E]=(0,a.useState)([]),[D,M]=(0,a.useState)([]),[F,R]=(0,a.useState)(!1),[T,_]=(0,a.useState)(0),[q,H]=(0,a.useState)("shortest"),[L,U]=(0,a.useState)([]),[V,Z]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(n&&j&&t){const e=(0,b.oz)(t,n.name,j.name,4);if(M(e),e.length>0){let s;switch(q){case"strongest":s=e.reduce((e,s)=>s.score>e.score?s:e);break;case"most_diverse":s=e.reduce((e,s)=>s.length>e.length?s:e);break;default:s=e.reduce((e,s)=>s.length<e.length?s:e)}C(s.path)}}},[n,j,t,q]),(0,a.useEffect)(()=>{if(n&&t){const e=(0,b.fC)(t,n.name,N,w);U(e)}},[n,t,N,w]);const B=(0,a.useMemo)(()=>{var e;if(!P.length)return null;const s=new Set(P.map(e=>e.pathogen.name)),t=P.reduce((e,s)=>e+(s.similarity||0),0)/P.length;return{pathogensExplored:s.size,stepsTotal:P.length,averageSimilarity:t,explorationTime:Date.now()-((null===(e=P[0])||void 0===e?void 0:e.timestamp)||Date.now())}},[P]),G=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a={pathogen:e,timestamp:Date.now(),step:P.length,reason:s,similarity:t};E(e=>[...e,a]),Z(s=>[...s,e.name]),_(e=>e+1),y(e)},I=()=>{R(!1),E([]),C([]),_(0),Z([])},J=e=>{if(e<P.length){const s=P[e];_(e),y(s.pathogen),Z(P.slice(0,e+1).map(e=>e.pathogen.name))}};return n?(0,v.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border ".concat(k),children:[(0,v.jsxs)("div",{className:"p-6 border-b",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,v.jsx)(o,{className:"text-blue-600",size:20}),"Connection Explorer"]}),(0,v.jsx)("p",{className:"text-gray-600 mt-1",children:"Discover pathogen relationships and learning pathways"})]}),(0,v.jsx)("div",{className:"flex items-center gap-2",children:F?(0,v.jsxs)("button",{onClick:()=>R(!1),className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,v.jsx)(m,{size:16}),"Pause"]}):(0,v.jsxs)("button",{onClick:()=>function(){if(z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"guided"),R(!0),_(0),n){const e=[{pathogen:n,timestamp:Date.now(),step:0,reason:"Starting pathogen"}];E(e),Z([n.name])}}("guided"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,v.jsx)(x,{size:16}),"Start Exploring"]})})]}),V.length>0&&(0,v.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-4",children:[(0,v.jsx)(h.A,{size:14}),V.map((e,s)=>(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)("button",{onClick:()=>J(s),className:"hover:text-blue-600 transition-colors",children:e.split(" ").slice(0,2).join(" ")}),s<V.length-1&&(0,v.jsx)(g,{size:12,className:"text-gray-400"})]},s))]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{className:"text-sm text-gray-600",children:"Mode:"}),["guided","freeform","recommendations"].map(e=>(0,v.jsx)("button",{onClick:()=>z(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(S===e?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,v.jsxs)("div",{className:"p-6 space-y-6",children:[(0,v.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium text-gray-900",children:"Currently Exploring"}),(0,v.jsx)("div",{className:"text-lg font-bold text-blue-600",children:n.name}),(0,v.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",T+1," \u2022 ",(null===(s=n.conditions)||void 0===s?void 0:s.length)||0," conditions"]})]}),(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"text-2xl",children:"\ud83d\udd2c"}),(0,v.jsx)("div",{className:"text-xs text-gray-500",children:"Active"})]})]})}),"guided"===S&&j&&(A&&0!==A.length?(0,v.jsxs)("div",{className:"border rounded-lg p-4 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,v.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,v.jsx)(i,{size:18,className:"text-blue-600"}),"Exploration Path (",A.length," steps)"]}),(0,v.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:A.map((e,s)=>(0,v.jsxs)(a.Fragment,{children:[(0,v.jsx)("button",{onClick:()=>{const a=t.pathogens.find(s=>s.name===e);a&&G(a,"Path step ".concat(s+1))},className:"flex-shrink-0 px-3 py-2 rounded-lg border font-medium text-sm transition-colors ".concat(P.some(s=>s.pathogen.name===e)?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:border-blue-300 hover:bg-blue-50"),children:(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[P.some(s=>s.pathogen.name===e)&&(0,v.jsx)(l.A,{size:12,className:"text-blue-600"}),e.split(" ").slice(0,2).join(" ")]})}),s<A.length-1&&(0,v.jsx)(r.A,{size:16,className:"text-gray-400 flex-shrink-0"})]},e))}),D.length>1&&(0,v.jsxs)("div",{className:"mt-3 text-xs text-gray-600",children:[D.length-1," alternative paths available"]})]}):null),"recommendations"===S&&(0===L.length?null:(0,v.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,v.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,v.jsx)(d.A,{size:18,className:"text-purple-600"}),"Recommended Next Steps"]}),(0,v.jsx)("div",{className:"space-y-2",children:L.slice(0,5).map((e,s)=>{const a=t.pathogens.find(s=>s.name===e.pathogen);return a?(0,v.jsx)("button",{onClick:()=>G(a,e.reasoning,e.weight),className:"w-full p-3 text-left border rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsx)("div",{className:"font-medium text-gray-900",children:a.name}),(0,v.jsx)("div",{className:"text-sm text-gray-600",children:e.reasoning})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsxs)("div",{className:"text-sm font-medium text-blue-600",children:[(100*e.weight).toFixed(0),"%"]}),(0,v.jsx)(r.A,{size:14,className:"text-gray-400"})]})]})},s):null})})]})),F&&0!==P.length?(0,v.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,v.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,v.jsx)(o,{size:18,className:"text-green-600"}),"Exploration History"]}),(0,v.jsx)("button",{onClick:I,className:"p-1 text-gray-500 hover:text-gray-700",title:"Reset exploration",children:(0,v.jsx)(c.A,{size:16})})]}),(0,v.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:P.map((e,s)=>(0,v.jsx)("div",{onClick:()=>J(s),className:"p-3 rounded-lg border cursor-pointer transition-colors ".concat(s===T?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsxs)("div",{className:"font-medium text-gray-900",children:[e.step+1,". ",e.pathogen.name]}),(0,v.jsx)("div",{className:"text-sm text-gray-600",children:e.reason}),e.similarity&&(0,v.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Similarity: ",(100*e.similarity).toFixed(0),"%"]})]}),(0,v.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]})},s))}),B&&(0,v.jsx)("div",{className:"mt-4 pt-3 border-t bg-gray-50 rounded-lg p-3",children:(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-medium text-gray-900",children:B.pathogensExplored}),(0,v.jsx)("div",{className:"text-gray-600",children:"Pathogens Explored"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"font-medium text-gray-900",children:B.stepsTotal}),(0,v.jsx)("div",{className:"text-gray-600",children:"Total Steps"})]})]})})]}):null,(0,v.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,v.jsxs)("button",{onClick:()=>{if(L.length>0){const e=L[Math.floor(Math.random()*L.length)],s=t.pathogens.find(s=>s.name===e.pathogen);s&&G(s,"Random discovery",e.weight)}},className:"px-3 py-2 border rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[(0,v.jsx)(p.A,{size:14,className:"inline mr-1"}),"Random Discovery"]}),(0,v.jsxs)("button",{onClick:()=>{const e=t.pathogens.filter(e=>!P.some(s=>s.pathogen.name===e.name)).reduce((e,s)=>s.connections>((null===e||void 0===e?void 0:e.connections)||0)?s:e,null);e&&G(e,"High connectivity target")},className:"px-3 py-2 border rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[(0,v.jsx)(u.A,{size:14,className:"inline mr-1"}),"Find Hub"]})]})]})]}):(0,v.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-6 ".concat(k),children:(0,v.jsxs)("div",{className:"text-center text-gray-500",children:[(0,v.jsx)(o,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,v.jsx)("p",{children:"Select a pathogen to start exploring connections"})]})})}}}]);
//# sourceMappingURL=322.1a37eb3d.chunk.js.map